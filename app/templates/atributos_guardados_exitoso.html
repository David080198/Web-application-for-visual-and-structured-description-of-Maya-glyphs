<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="../static/imgs/icono.ico">
    <link rel="stylesheet" href="../static/css/inicio.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='../static/css/atributos_guardados_exitoso.css') }}" />
    <link rel="stylesheet" href="../static/css/atributos_guardados_exitoso.css">
    <title>Iniciar sesión</title>

    <script>
        function llevo_inicio()
        {
        var urlCompleta = window.location.href;
        console.log("URL completa:", urlCompleta);
        var segmentos = urlCompleta.split("/");
        if (segmentos.includes("movil")) {
            {% set orden_datos = "thomson" %}
            {% set datos_filtro = "1" %}
            {% set busqueda = "default" %}
            {% set datos_atributes = "default" %}
            {% set dato_usuario = "default" %}
            // Construye la URL con parámetros
            var nuevaUrl = "{{ url_for('index_movil', orden_datos=orden_datos, datos_filtro=datos_filtro,busqueda=busqueda,datos_atributes=datos_atributes,dato_usuario=dato_usuario) }}";
            window.location.href = nuevaUrl;
        }
        if(segmentos.includes("desk"))
        {
            {% set orden_datos = "thomson" %}
            {% set datos_filtro = "1" %}
            {% set datos_busqueda = "default" %}
            {% set datos_atributes = "default" %}
            {% set dato_usuario = "default" %}
            // Construye la URL con parámetros
            var nuevaUrl = "{{ url_for('index', orden_datos=orden_datos, datos_filtro=datos_filtro,datos_busqueda=datos_busqueda,datos_atributes=datos_atributes,dato_usuario=dato_usuario) }}";
            window.location.href = nuevaUrl;
        }
        //window.location.href = nuevaUrl;
        } 
        document.addEventListener('DOMContentLoaded', function () {
            // Coloca aquí el código JavaScript que agrega eventos a los elementos
           
            const caja3 = document.getElementById('email');
            const caja1 = document.getElementById('contrasena');
            
            caja3.addEventListener('input', verificar_correo);
            
            
            function verificar_correo()
            {
                const regexCorreoElectronico = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;
                let correo = document.getElementById('email').value;
    
                if(regexCorreoElectronico.test(correo))
                {
                    console.log("Su correo es valido")
                    
                    document.getElementById("mensaje_correcto_incorrecto").style.color = 'green'
                    document.getElementById("email").style.borderColor = 'green'
                    document.getElementById("mensaje_correcto_incorrecto").style.padding = 0
                }
                else
                {
                    console.log("Correo no valido")
                    
                    document.getElementById("mensaje_correcto_incorrecto").style.color = 'red'
                    document.getElementById("email").style.borderColor = 'red'
                    document.getElementById("mensaje_correcto_incorrecto").style.padding = 0
                }
            }
        });

        function enviar_alerta_datos()
        {
        
        let correo = document.getElementById('email').value;
        let password = document.getElementById('contrasena').value;
        
        // Expresión regular para contraseña 
        const regexCorreoElectronico = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;

        if(regexCorreoElectronico.test(correo))
        {
            console.log("Su correo es valido")
            document.getElementById("mensaje_correcto_incorrecto").style.color = 'green'
            document.getElementById("email").style.borderColor = 'green'
            document.getElementById("mensaje_correcto_incorrecto").style.padding = 0
        }
        else
        {
            console.log("Correo no valido")
            document.getElementById("mensaje_correcto_incorrecto").textContent = "Correo no valido"
            document.getElementById("mensaje_correcto_incorrecto").style.color = 'red'
            document.getElementById("email").style.borderColor = 'red'
            document.getElementById("mensaje_correcto_incorrecto").style.padding = 0

        }

        if(password === "")
        {
            document.getElementById("falta_contraseña").textContent = "Falta tu contraseña"
            document.getElementById("falta_contraseña").style.color = 'red'
            document.getElementById("contrasena").style.borderColor = 'red'
            document.getElementById("falta_contraseña").style.padding = 0
        }

        if(regexCorreoElectronico.test(correo) && password != "")
        {   
            console.log("Si entro a la secuencia de condicionales completas");
            //document.getElementById("container_modal").style.display = "block";
            //document.getElementById("modal_1").style.display = "block";

            return true;
                   
        }
        
    }
    function llevar_a_recuperar_contraseña()
    {
        enlace_actual = window.location.href
        enlace_actual_1 = window.location.hostname
        enlace_actual_2 = window.location.pathname
        enlace_actual_3 = window.location.protocol

        console.log(enlace_actual.toString())
        console.log(enlace_actual_1.toString())
        console.log(enlace_actual_2.toString())
        console.log(enlace_actual_3.toString())

        var url = new URL(enlace_actual);
        var result = url.port;

        enlace_nuevo = enlace_actual_3 + "//" + enlace_actual_1 + ":" + result + "/recuperar_contraseña"
        console.log(enlace_nuevo)

        //window.location.replace(enlace_nuevo);
    }

    </script>
</head>
<body>
    <!--<button class="boton-cabecera" onclick=llevo_inicio()>
        <span class="material-symbols-outlined">
            arrow_back
        </span>
    </button>-->
    <div>
        <p class="encabezado">Instituto Politénico Nacional</p>
        <p class="encabezado">Centro de Investigación en Computación</p>
    </div>
    <div class="container">
        <p class="anuncio">Tus atributos se guardaron con exito</p>
        <button class = "boton_reenviar" type="button" onclick="llevo_inicio()" >Regresar a Inicio</button>
    </div>
</body>
</html>